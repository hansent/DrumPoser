#:kivy 1.1

<MainMenu>:
    BoxLayout:
        orientation: "vertical"
        Button:
            text: "Beat Composer"
            on_press: root.app.goto_screen("editor")
        Button:
            text: "Beat Trainer"
            on_press: root.app.goto_screen("teachme")



<TeachMeScreen>:
    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            ToggleButton:
                id: lefthand
                font_size: 24
                text: "Left Hand"
            ToggleButton:
                id: righthand
                font_size: 24
                text: "Right Hand"

        BoxLayout:
            ToggleButton:
                font_size: 24
                text: "Left Foot"
            ToggleButton:
                font_size: 24
                text: "Right Foot\nBass Drum"

        BoxLayout:
            Button:
                text: "Back to main"
                on_press: root.app.goto_screen("menu")
            Button:
                text: "Help"
            ToggleButton:
                text: "Play Instruments"
            ToggleButton:
                text: "Play Metronome"
            Button:
                text: "Actions"



<EditorScreen>:
    settings: settings
    instrument_list: instrument_list


    BoxLayout:
        id: instrument_list
        orientation: "vertical"
        size_hint: 1, .85
        pos_hint: {'x':0, 'y':0.1}
                   

    EditorSettings:
        id: settings
        size_hint: 1,0.05
        pos_hint: {'top': 1}

    EditorControlls:
        size_hint: 1,0.1

            


        
<InstrumentEditor>:
    Label:
        text: root.name
        size_hint_x: 0.25
    BoxLayout:
        ToggleButton
        ToggleButton
        ToggleButton
        ToggleButton
            
        


<EditorControlls>:
    orientation: 'horizontal'
    Button:
        text: 'Back to Main'
        on_press: root.parent.app.goto_screen("menu")
    Button:
        text: '<-'
        on_press: root.parent.previous()
    ToggleButton:
        text: '||' if self.state == "down" else ">"
        on_press: root.parent.play() if self.state == "down" else root.parent.pause()
    Button:
        text: '->'
        on_press: root.parent.next()
    Button:
        text: 'Actions'
        on_press: root.parent.show_actions()



<EditorSettings>:
    on_time_signature: print "signature changed:", self.time_signature
    on_tempo: print "tempo changed:", self.tempo

    Label:
        text: 'Time signature:'
        size_hint: 0.15,1
    TextInput:
        size_hint: 0.05,1
        id: timevalue1
        multiline: False
        text: '4'
        on_text_validate: root.time_signature = float(self.text) / float(timevalue2.text)

    Label:
        size_hint:0.05,1
        text: '/'
    TextInput:
        size_hint: 0.05,1
        id: timevalue2
        multiline: False
        text: '4'
        on_text_validate: root.time_signature = float(timevalue1.text) / float(self.text)

    Label:
        text: 'Tempo'
        size_hint:0.15,1
    TextInput:
        size_hint: 0.05,1
        id: tempovalue
        text: '100'
        multiline: False
        on_text_validate: root.tempo = float(self.text)

    Label:
        text: 'Grid columns:'
        size_hint: 0.15,1
    TextInput
        size_hint: 0.05,1
        id: gridcount
        text: '4'
        multiline: False
        on_text_validate: root.gridcount = float(self.text)

    Label: 
        text: 'Note length'
        size_hint: 0.15,1
    Button:
        size_hint: 0.08,1
        text: '1/1'
        group: 'notes'
        #on_press - change to new note length, cycle
